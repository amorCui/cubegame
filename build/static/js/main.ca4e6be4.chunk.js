(this.webpackJsonpcubegame=this.webpackJsonpcubegame||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/wall.80656b31.jpg"},26:function(e,t,n){e.exports=n(40)},31:function(e,t,n){},32:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(20),o=n.n(r);n(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(23),h=n(6),c=n(8),d=n(21),u=n(10),l=n(9),w=n(11),p=n(2),m=n(22),f=n.n(m),v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={options:null,renderer:null,width:null,height:null,camera:null,scene:null,light:null,minMapCamera:null,keyEventListener:!0},n}return Object(w.a)(t,e),Object(d.a)(t,[{key:"init",value:function(e){var t,n=window.innerWidth,i=window.innerHeight;null===this.state.renderer?((t=new p.l({antialias:!0})).setSize(n,i),t.setClearColor(0,1),this.setState((function(e){return{width:n,height:i,renderer:t}})),document.getElementById("canvas-frame").appendChild(this.state.renderer.domElement)):((t=this.state.renderer).setSize(n,i),this.setState((function(e){return{width:n,height:i,renderer:t}})));var a=this.state.camera;a&&(a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),this.setState((function(e){return{camera:a}})));var r=this.state.options.cameraOptions.minMapCamera,o=this.state.minMapCamera;o&&(o.left=window.innerWidth/r.left,o.right=window.innerWidth/r.right,o.top=window.innerHeight/r.top,o.bottom=window.innerHeight/r.bottom,o.updateProjectionMatrix(),this.setState((function(e){return{minMapCamera:o}})))}},{key:"initCamera",value:function(e){var t=new p.i(45,this.state.width/this.state.height,1,1e4);t.position.set(0,20,0),t.up.set(0,1,0),this.setState((function(e){return{camera:t}}))}},{key:"initScene",value:function(){this.setState((function(e){return{scene:new p.j}}))}},{key:"initLight",value:function(e){var t=new p.a(16777215);t.position.set(300,300,0);var n=this.state.scene;n.add(t),this.setState((function(e){return{light:t,scene:n}}))}},{key:"initObject",value:function(e){for(var t=new p.e,n=e.wall,i=[],a=0;a<6;a++)i.push(new p.g({map:(new p.k).load(f.a)}));for(var r=n.height;r>=0;r--)for(var o=-n.width/2;o<=n.width/2;o++){var s=new p.d(e.objSize.lenght,e.objSize.width,e.objSize.height),h=new p.f(s,i);h.position.set(o*e.objSize.lenght,e.objSize.height*r,n.width/2*e.objSize.height),t.add(h);var c=new p.f(s,i);c.position.set(o*e.objSize.lenght,e.objSize.height*r,-n.width/2*e.objSize.height),t.add(c);var d=new p.f(s,i);d.position.set(n.width/2*e.objSize.height,e.objSize.height*r,o*e.objSize.lenght),t.add(d);var u=new p.f(s,i);u.position.set(-n.width/2*e.objSize.height,e.objSize.height*r,o*e.objSize.lenght),t.add(u)}var l=this.state.scene;l.add(t),this.setState({scene:l})}},{key:"initMinMap",value:function(){var e=this.state.options.cameraOptions.minMapCamera,t=new p.h(window.innerWidth/e.left,window.innerWidth/e.right,window.innerHeight/e.top,window.innerHeight/e.bottom,1,1e3);t.position.x=0,t.position.z=0,t.position.y=1e3,t.lookAt(0,0,0),this.setState((function(e){return{minMapCamera:t}}))}},{key:"initHelper",value:function(){var e=new p.b(10),t=new p.c(this.state.camera),n=this.state.scene;n.add(e),n.add(t),this.setState({scene:n})}},{key:"animation",value:function(){var e=this;window.requestAnimationFrame((function t(n){e.state.renderer.setClearColor(0,0),e.state.renderer.setViewport(0,0,window.innerWidth,window.innerHeight),e.state.renderer.render(e.state.scene,e.state.camera);var i=window.innerWidth/6,a=window.innerHeight/6;e.state.renderer.setClearColor(2236962,1),e.state.renderer.clearDepth(),e.state.renderer.setScissorTest(!0),e.state.renderer.setScissor(120,120,i,a),e.state.renderer.setViewport(120,120,i,a);var r=e.state.minMapCamera;e.state.renderer.render(e.state.scene,r),e.state.renderer.setScissorTest(!1),window.requestAnimationFrame(t)}))}},{key:"initThree",value:function(){var e=this;fetch("./options.json").then((function(e){return e.json()})).then((function(t){console.log("data:",t),e.setState({options:t}),e.init(t),e.initCamera(t),e.initScene(),e.initLight(t),e.initObject(t.objOptions),e.initMinMap(),e.initHelper(),e.animation()}))}},{key:"go",value:function(){var e=this.state.camera,t=this.state.minMapCamera,n=this.state.options.objOptions.objSize;e.position.z=e.position.z-n.width,t.position.z=t.position.z-n.width,this.setState({camera:e,minMapCamera:t})}},{key:"componentDidMount",value:function(){var e=this;this.initThree(),window.addEventListener("resize",(function(){e.init()})),window.addEventListener("keyup",(function(t){if(e.state.keyEventListener){switch(e.setState({keyEventListener:!1}),t.key){case"ArrowUp":e.go();break;case"ArrowLeft":case"ArrowDown":case"ArrowRight":break;default:console.log("case default")}e.setState({keyEventListener:!0})}}))}},{key:"render",value:function(){return a.a.createElement("div",{id:"canvas-frame"})}}]),t}(a.a.Component);n(32);var g=function(){return a.a.createElement(v,null)},S=function(){return a.a.createElement(s.a,null,a.a.createElement(h.c,null,a.a.createElement(h.a,{exact:!0,path:"/",component:g})))};o.a.render(a.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.ca4e6be4.chunk.js.map